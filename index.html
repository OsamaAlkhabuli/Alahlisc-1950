
<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>المشروع الاستثماري - الأهلي طرابلس</title>
  <style>
    body {
      font-family: 'Cairo', sans-serif;
      margin: 0;
      padding: 0;
      background: #f8f9fa;
      color: #222;
    }
    header {
      background-color: #006400;
      color: goldenrod;
      padding: 20px;
      text-align: center;
      font-size: 20px;
      font-weight: bold;
      line-height: 1.5;
    }
    nav {
      background: #e9ecef;
      padding: 10px;
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      gap: 10px;
    }
    .tab-btn {
      background-color: goldenrod;
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 6px;
      cursor: pointer;
    }
    .tab-btn.add {
      background-color: #007bff;
    }
    .tab-content {
      display: none;
      padding: 20px;
    }
    .tab-content.active {
      display: block;
    }
    .filters input, .filters select {
      padding: 6px 12px;
      margin: 5px;
      border: 1px solid #ccc;
      border-radius: 5px;
      min-width: 150px;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 20px;
      background: white;
    }
    th, td {
      border: 1px solid #ddd;
      padding: 8px;
      text-align: center;
    }
    th {
      background-color: #006400;
      color: white;
    }
    footer {
      background: #006400;
      color: goldenrod;
      padding: 10px;
      text-align: center;
      font-size: 14px;
    }
  </style>
</head>
<body>
  <header>
    نادي الأهلي الرياضي<br>
    إدارة الاستثمار<br>
    المشروع الاستثماري
  </header>
  <nav>
    <button class="tab-btn active" onclick="showTab(0)">📌 الكاملة</button>
    <button class="tab-btn" onclick="showTab(1)">📌 غير كاملة</button>
    <button class="tab-btn" onclick="showTab(2)">📌 مراجعة القانونية</button>
    <a href="index_with_github.json.html" target="_blank">
      <button class="tab-btn add">➕ إضافة مستأجر</button>
    </a>
  </nav>

  <div class="tab-content active" id="tab0">
    <div class="filters">
      <input id="search0" placeholder="🔍 اسم المستأجر">
      <select id="filter0">
        <option value="">📂 كل المراحل</option>
      </select>
    </div>
    <div id="table0"></div>
  </div>

  <div class="tab-content" id="tab1">
    <div class="filters">
      <input id="search1" placeholder="🔍 اسم المستأجر">
      <select id="filter1">
        <option value="">📂 كل المراحل</option>
      </select>
    </div>
    <div id="table1"></div>
  </div>

  <div class="tab-content" id="tab2">
    <div class="filters">
      <input id="search2" placeholder="🔍 اسم المستأجر">
      <select id="filter2">
        <option value="">📂 كل المراحل</option>
      </select>
    </div>
    <div id="table2"></div>
  </div>

  <footer>
    تصميم: م. أسامة الخبولي - 2025
  </footer>

  <script>
    let data = {};

    function showTab(index) {
      document.querySelectorAll('.tab-content').forEach((tab, i) => {
        tab.classList.toggle('active', i === index);
      });
      document.querySelectorAll('.tab-btn').forEach((btn, i) => {
        if (!btn.classList.contains('add')) {
          btn.classList.toggle('active', i === index);
        }
      });
    }

    function populateTable(rows, index) {
      const search = document.getElementById('search' + index);
      const filter = document.getElementById('filter' + index);
      const container = document.getElementById('table' + index);
      const phases = [...new Set(rows.map(r => r['المرحلة']).filter(Boolean))];
      filter.innerHTML = '<option value="">📂 كل المراحل</option>' + phases.map(p => `<option value="${p}">${p}</option>`).join('');

      function render() {
        const q = search.value.trim();
        const f = filter.value;
        const filtered = rows.filter(r => (!q || (r['المستأجر'] || '').includes(q)) && (!f || r['المرحلة'] === f));
        if (!filtered.length) return container.innerHTML = '<p>لا توجد بيانات</p>';
        const cols = Object.keys(filtered[0]);
        let html = '<table><thead><tr>' + cols.map(c => `<th>${c}</th>`).join('') + '</tr></thead><tbody>';
        html += filtered.map(r => '<tr>' + cols.map(c => `<td>${r[c] || ''}</td>`).join('') + '</tr>').join('');
        html += '</tbody></table>';
        container.innerHTML = html;
      }

      search.oninput = filter.onchange = render;
      render();
    }

    fetch('alahlisc.json')
      .then(res => res.json())
      .then(json => {
        data = json;
        populateTable(data.complete, 0);
        populateTable(data.not_completed, 1);
        populateTable(data.legal_review, 2);
      });
  </script>
</body>
</html>
