
<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø³ØªØ£Ø¬Ø±ÙŠÙ†</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
  <style>
    body { font-family: 'Cairo', sans-serif; background: #f4f4f4; padding: 20px; direction: rtl; }
    h2 { color: #006400; }
    form, .filters { background: white; padding: 20px; border-radius: 10px; max-width: 800px; margin: auto; box-shadow: 0 0 10px rgba(0,0,0,0.1); }
    label { display: block; margin: 10px 0 5px; font-weight: bold; }
    input, select { width: 100%; padding: 8px; border: 1px solid #ccc; border-radius: 5px; }
    button { background-color: #006400; color: white; padding: 10px 15px; border: none; border-radius: 5px; margin-top: 15px; cursor: pointer; }
    table { width: 100%; margin-top: 20px; border-collapse: collapse; background: white; }
    th, td { padding: 10px; border: 1px solid #ccc; text-align: center; }
    th { background-color: #006400; color: white; }
    .filters { margin-top: 30px; display: flex; flex-wrap: wrap; gap: 10px; justify-content: center; }
  </style>
</head>
<body>
  <h2>ğŸ“¥ Ø¥Ø¯Ø®Ø§Ù„ Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø³ØªØ£Ø¬Ø± Ø¬Ø¯ÙŠØ¯</h2>
  <form id="tenantForm">
    <label>Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ£Ø¬Ø±</label><input type="text" name="Ø§Ù„Ù…Ø³ØªØ£Ø¬Ø±" required />
    <label>Ø§Ù„Ù…Ø±Ø­Ù„Ø©</label><select name="Ø§Ù„Ù…Ø±Ø­Ù„Ø©"><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option></select>
    <label>Ø§Ù„Ø¯ÙˆØ±</label><input type="number" name="Ø§Ù„Ø¯ÙˆØ±" required />
    <label>Ø±Ù‚Ù… Ø§Ù„Ù…Ø­Ù„</label><input type="number" name="Ø±Ù‚Ù… Ø§Ù„Ù…Ø­Ù„" required />
    <label>Ø§Ù„Ø¥ÙŠØ¬Ø§Ø±</label><input type="number" name="Ø§Ù„Ø¥ÙŠØ¬Ø§Ø±" required />
    <label>Ù‚ÙŠÙ…Ø© Ø§Ù„Ø§Ø³ØªØ«Ù…Ø§Ø±</label><input type="number" name="Ù‚ÙŠÙ…Ø© Ø§Ù„Ø§Ø³ØªØ«Ù…Ø§Ø±" required />
    <label>Ù‚ÙŠÙ…Ø© Ø§Ù„ØªØ·ÙˆÙŠØ±</label><input type="number" name="Ù‚ÙŠÙ…Ø© Ø§Ù„ØªØ·ÙˆÙŠØ±" required />
    <label>ØªØ§Ø±ÙŠØ® Ø¢Ø®Ø± Ø³Ø¯Ø§Ø¯</label><input type="date" name="ØªØ§Ø±ÙŠØ® Ø¢Ø®Ø± Ø³Ø¯Ø§Ø¯" required />
    <label>Ø§Ù„Ø¨Ø§Ù‚ÙŠ</label><input type="number" name="Ø§Ù„Ø¨Ø§Ù‚ÙŠ" required />
    <label>ØªØ§Ø±ÙŠØ® Ø¨Ø¯Ø§ÙŠØ© Ø§Ù„Ø¹Ù‚Ø¯</label><input type="date" name="ØªØ§Ø±ÙŠØ® Ø¨Ø¯Ø§ÙŠØ© Ø§Ù„Ø¹Ù‚Ø¯" required />
    <label>ØªØ§Ø±ÙŠØ® Ù†Ù‡Ø§ÙŠØ© Ø§Ù„Ø¹Ù‚Ø¯</label><input type="date" name="ØªØ§Ø±ÙŠØ® Ù†Ù‡Ø§ÙŠØ© Ø§Ù„Ø¹Ù‚Ø¯" required />
    <label>Ù…Ù„Ø§Ø­Ø¸Ø§Øª</label><input type="text" name="Ù…Ù„Ø§Ø­Ø¸Ø§Øª" />
    <label>Ø§Ù„Ù‚ÙŠÙ…Ø© Ø§Ù„Ù…Ø¯ÙÙˆØ¹Ø©</label><input type="number" name="Ø§Ù„Ù‚ÙŠÙ…Ø© Ø§Ù„Ù…Ø¯ÙÙˆØ¹Ø©" required />
    <label>Ø±Ù‚Ù… Ø§Ù„Ø¥ÙŠØµØ§Ù„</label><input type="text" name="Ø±Ù‚Ù… Ø§Ù„Ø¥ÙŠØµØ§Ù„" required />
    <button type="submit">ğŸ’¾ Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</button>
  </form>

  <div class="filters">
    <input id="filterName" placeholder="ğŸ” Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ£Ø¬Ø±" />
    <input id="filterPhase" placeholder="ğŸ“ Ø§Ù„Ù…Ø±Ø­Ù„Ø©" />
    <input id="filterShop" placeholder="ğŸª Ø±Ù‚Ù… Ø§Ù„Ù…Ø­Ù„" />
    <button onclick="exportPDF()">ğŸ“„ ØªØµØ¯ÙŠØ± PDF</button>
  </div>

  <div id="dataTable"></div>

  <script>
    let tenants = [];

    fetch('https://raw.githubusercontent.com/OsamaAlkhabuli/Alahlisc-1950/main/tenants_data.json')
      .then(response => response.json())
      .then(data => {
        tenants = data;
        renderTable();
      })
      .catch(error => console.warn('ØªØ¹Ø°Ø± ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† GitHub:', error));

    document.getElementById('tenantForm').addEventListener('submit', function(e) {
      e.preventDefault();
      const formData = new FormData(this);
      const tenant = {};
      formData.forEach((value, key) => tenant[key] = value);
      tenants.push(tenant);
      this.reset();
      renderTable();
    });

    ['filterName', 'filterPhase', 'filterShop'].forEach(id => {
      document.getElementById(id).addEventListener('input', renderTable);
    });

    function renderTable() {
      const name = document.getElementById('filterName').value.trim();
      const phase = document.getElementById('filterPhase').value.trim();
      const shop = document.getElementById('filterShop').value.trim();

      const filtered = tenants.filter(t =>
        (!name || t['Ø§Ù„Ù…Ø³ØªØ£Ø¬Ø±'].includes(name)) &&
        (!phase || t['Ø§Ù„Ù…Ø±Ø­Ù„Ø©'] === phase) &&
        (!shop || t['Ø±Ù‚Ù… Ø§Ù„Ù…Ø­Ù„'] === shop)
      );

      if (filtered.length === 0) {
        document.getElementById('dataTable').innerHTML = '<p>Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ù„Ø¹Ø±Ø¶Ù‡Ø§</p>';
        return;
      }

      const headers = Object.keys(filtered[0]);
      let html = '<table><thead><tr>' + headers.map(h => `<th>${h}</th>`).join('') + '</tr></thead><tbody>';
      html += filtered.map(r => '<tr>' + headers.map(h => `<td>${r[h]}</td>`).join('') + '</tr>').join('');
      html += '</tbody></table>';
      document.getElementById('dataTable').innerHTML = html;
    }

    function exportPDF() {
      const element = document.getElementById('dataTable');
      const opt = {
        margin: 0.5,
        filename: 'Ø¨ÙŠØ§Ù†Ø§Øª_Ø§Ù„Ù…Ø³ØªØ£Ø¬Ø±ÙŠÙ†.pdf',
        image: { type: 'jpeg', quality: 0.98 },
        html2canvas: { scale: 2 },
        jsPDF: { unit: 'in', format: 'a4', orientation: 'landscape' }
      };
      html2pdf().set(opt).from(element).save();
    }
  </script>
</body>
</html>
